
Guang Ping Lou -- 20150326

Release Notes:  Extratropical Cyclone Tracker genesis_tracker.v3.4.0
This release note is also available at
https://docs.google.com/a/noaa.gov/document/d/14x03_BwLt8RuKSwwFNmHgczb3MXYy7vL-XVawxeSzUU/edit

The program that extracts storm tracks from model forecasts are being upgraded in order to accommodate newly implemented GEFS changes and replacing input GRIB1 data with GRIB2 data where available. 

v3.3.3 - Released November 28, 2012
Initial transition to WCOSS 

v3.3.4 - Released August 20, 2013
Navy model name changes from ngps to nvgm 

v3.4.0 - Released April 1, 2015
Made changes to the FORTRAN code so that it can read either GRIB1 or GRIB2  model input data.  

Modified scripts to include GRIB1 and GRIB2 options; as well as namelist that reflects changes to the input data format; The following models have the options of either GRIB1 or GRIB2 input: GFS, GEFS, NAM, SREF, FENS, NVGM, UKMET. Other models do not have the GRIB2 data.

Added FNMOC ensemble cyclone tracks. The new addition has 20 members in total and the tracker runs twice a day at 00z and 12z. The tracker reads in GRIB1 input data because there is no analysis (0hour) fields in GRIB2 format. When 0 hour analysis data become available, the tracker can switch the GRIB2 input data on.

SREF new members addition in anticipation of its impending implementation. Reduced perturbation models from 3 to 2. Increased number of members from 21 to 26. Added GRIB2 capability. This implementation still uses GRIB1 input data until SREF is upgraded.

Deleted gettrk_main_gen.fd/orders.f because libw3 already contains the subroutine. 

Using new version of g2_d library.

output changes (include all changes to output generated by this tracker): 

Forecast tracks every 6 hours instead of 12 hours for models ECMWF, CMC, CENS, NVGM, because of 6 hourly data become available.

compute resource information (mandatory!  Include for all jobs.

Initiate FNMOC FENS ensemble forecasts cyclone tracking. Start a JTRACKER twice a day at 07:40 and 19:40Z for 00Z and 12Z forecasts, respectively. The ensemble data arrive around 07:21 and 17:21.

All other jobs remain the same frequency and same start time as they are now.

job runs parallel in form of POE (MPMD)

Runtime does not change.

additional disk space required per day (30MB/day).

frequency of run remain the same..

Data retains for files in /com/hur/prod/global/yyyy and the same as before. 

pre-implementation testing requirements

All model data should be tested as input for the cyclone tracker. production jobs should be tested as part of this implementation

This change does not require a 30-day evaluation.

The code manager will exam the test results.

Dissemination info:
where should this output be sent: N/A. The data will be processed internally and disseminated via graphics and paired tracks to users in other crontab jobs.  

who are the users: general public, universities, service centers, etc.

output files in /com/hur/prod/global/$yyyy should be transferred from PROD WCOSS to DEV WCOSS.

Is the code proprietary and is there any restricted data: The code is not proprietary and the data is not restricted except for ECMWF data which is protected via a pre-approval procedure.

Archive to HPSS
N/A

v3.4.5 - Oct 14, 2016
For phase 2 path change in NAM upgrade 

v3.4.7 -March 8, 2018
Service Change Notes:  Extratropical Cyclone Tracker genesis_tracker.v3.4.7
The program that extracts storm tracks from model forecasts are being upgraded in order to replace input data from Canadian models CMC and CENS.
The tracker is activated to extract tracks from CMC and CENS twice a day.
Canadian deterministic and ensemble models (CMC and CENS) data have been changed to grib2 format and higher resolution. The data locations have been moved to /gpfs/hps/nco/ops/com/naefs/$envir/cmce.$PDY/$CYC/pgrb2ap5/ and /dcomdev/us007003/$PDY/wgrbbul/cmc_gdps_25km /. The tracker needs to be modified accordingly.
v3.3.3 - Released November 28, 2012
•	Initial transition to WCOSS
v3.3.4 - Released August 20, 2013
•	Navy model name changes from ngps to nvgm
v3.4.0 - Released April 1, 2015, revised on June 1, 2015
•	The new upgraded extratropical cyclone tracker code and scripts are in SubVersion repository: https://svnemc.ncep.noaa.gov/pr
•	ojects/verif/stormtrk/trk_glbl/tags/genesis_tracker.v3.4.0/
v3.4.4 - Released August 1, 2016
•	Switch NAN's data from grib1 to grib2 input.
•	Change NAVGEM data input to /dcom/us007003 following NCO's directory changes.
•	Add FNMOC ensemble cyclone tracks. The new addition has 21 members in total and the tracker runs twice a day at 00z and 12z. The tracker reads in GRIB2 input.
•	Move all tracks to a new location /com2/gentracks/prod/$yyyy
•	The new upgraded extratropical cyclone tracker code and scripts are in SubVersion repository: hppts://svnemc.ncep.noaa.gov/projects/verif/stormtrk/trk_glbl/tags/
v3.4.7 - Released April, 2018
•	Change CMC and CENS data from grib1 to grib2 input
•	Change CMC deterministic model input data path to  /dcomdev/us007003/$PDY/wgrbbul/cmc_gdps_25km
•	Change ensemble model input data to /gpfs/hps/nco/ops/com/naefs/$envir/cmce.$PDY/$CYC/pgrb2ap5/
•	Modify several scripts so that it can handle new data formats.
•	Modify ECMWF input data’s dates - there is no need to wait for this data.
•	Extend GEFS tracking to 354 hours from 180 hours.
Output changes (include all changes to output generated by this tracker):
•	GEFS tracks have been extended to 354 hours from 180 hours.
Compute resource information (mandatory!  Include for all jobs.)
•	Increase wall time for GEFS for 10 minutes from 40 minutes to 50 minutes (for safety purposes).  
•	Increase disk space 22 mb per cycle.
Pre-implementation testing requirements
•	All model data should be tested as input for the cyclone tracker.
•	This change does not require a 30-day evaluation. 
•	The code manager will exam the test results.
Implementation
•	Check out files from the VLAB repository listed below:
https://vlab.ncep.noaa.gov/redmine/projects/emc-verif/repository/revisions/stormtrk/show/trk_glbl
      With sub-branch: EMC_verif/trk_glbl/tags/genesis_tracker.v3.4.7
•	Five scripts have been modified and no FORTRAN source code changes. 
            jobs/JTRACKER
            scripts/exgenesis_tracker_poe.sh.ecf
             ush/tcvit.sh
             ush/genesis_gettrk_poe.sh
             ecf/jtracker_gefs_hh.sms.lsf where hh=cycle hour
 Include dissemination info
•	Where should this output be sent: N/A. The data will be processed internally and disseminated via graphics and paired tracks to users in other crontab jobs.
 Who are the users: 
•	general public, universities, service centers, etc.
Is the code proprietary and is there any restricted date: •	The code is not proprietary and the data is not restricted.
 Archive to HPSS: N/A


20190830:
Release Notes:  Genesis Tracker - released to NCO on September 30, 2019
This version changes model input data locations where necessary to accommodate the decommission of Phase 1. The output tracks are as well relocated to a more concentrated directory (gentracks). Several scripts were modified to accommodate the transition from Phase 1 to Dell due to computing configuration changes and library modularization.

Transition to from Tide/Gyre Phase 1 to Venus/Mars
Where is the release tag on subversion/git/vlab?
List of external software used: nceplibs modules
w3emc/2.3.0, w3nco/2.0.6, bacio/2.0.2, sp/2.02, g2/3.1.0, jasper/1.900.29, libpng/1.2.59, zlib/1.2.11, grib_util/1.0.6	
List of all code/scripts modified with this release
/jobs/JTRACKER
/scripts/exgenesis_tracker_poe.sh.ecf
/ush/genesis_gettrk_poe.sh
/ush/verify_pair_tcvit.sh
/ush/verify_pair_glbl.sh
/ush/tcvit.sh
/ecf/all files
/sorc/*/makefile
/sorc/machine-setup.sh            ---added
/sorc/build.scr
/modulefiles/gen_trkr.wcoss_dell_p3. Etc.   --- added
Changes were made to the above code/scripts:
 COMROOT is changed to COMROOTp3:
export COMROOTp3=/gpfs/dell1/nco/ops/com
Old: export COMROOT=/gpfs/tp2/nco/ops/com
export optrack=$COMOUT/plot 
Old: export optrack=$COMOMB/plot
etc.

                  2. Change tracker output from various locations to this unified directory, they should                    be scrubbed after a few days: 
COMOUT=${COMROOTp3}/gentracks/${envir}/${RUN}.$PDY/track

      3. Move all files below before the transition: 
                    Move /gpfs/tp2/nco/ops/com/gentracks/prod/gentracks/YYYY
	        To /gpfs/dell1/nco/ops/com//gentracks/prod/gentracks/YYYY
                    These files are not to be removed and they are permanent.

	      4. Move following files before transition as well and they are permanent:
                     Move /gpfs/tp1/nco/ops/com/arch/prod/syndat/
                     To /gpfs/dell1/nco/ops/com/arch/prod/syndat/ 
                        Or /gpfs/dell1/nco/ops/com/gfs/prod/syndat/   (decided by GFS)

	      5. Change input model locations for the following models Because we don’t know the locations yet as of today.
COMIN=/gpfs/gp1/nco/ops/dcom/us007003/20190821/wgrbbul/fnmocens_gb2
COMIN=/gpfs/gp1/nco/ops/dcom/us007003/20190821/wgrbbul/ecmwf
COMIN=/gpfs/gp1/nco/ops/com/hourly/prod/eens.20190821
COMIN=/gpfs/gp1/nco/ops/dcom/us007003/20190821/wgrbbul/cmc_gdps_25km
COMIN=/gpfs/gp1/nco/ops/dcom/us007003/navgem

                 6. /scripts/exgenesis_tracker_poe.sh.ecf ---- computing environment changes.
	     7. /ush/genesis_gettrk_poe.sh   ---- utility paths changes.
                8. /ush/verify_pair_tcvit.sh          ---- utility paths changes    
     9. /ush/verify_pair_glbl.sh          ---- utility paths changes
    10. /ush/tcvit.sh                           ---- utility paths changes
    11. /modulefiles/gen_trkr.wcoss_dell_p3  --- added 4 modules files for different platforms
    12. /sorc/machine-setup.sh       ---- add this file to identify which machine 
    13. /sorc/build.scr                       ---- using modules to compile code
         Recompile the code --- sh buld.src
    14. /ecf/genesis/jtracker_????.ecf          ---- changed output to P3
Were any other changes made that aren’t directly related to the transition?
	No other changes were made not related to this transition.
Are there any changes to incoming data needs or outgoing products?
No. 
If output filenames are changing, list the current and new filename.
N/A.
Compute resource information, for every job:
	Remain the same.
Disk space required per day or per cycle; data retention on disk will remain the same.
Dissemination will remain the same.
HPSS archive retention will remain the same. (N/A)
What are your up and downstream dependencies? 
All upstream model data (remain the same.)

